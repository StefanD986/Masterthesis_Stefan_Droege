\section{Systemhardware}
Der in dieser Arbeit entwickelte GPS Empfänger ist Teil des Kommunikationssystems des \dscubesat. Das Kommunikationssystem wurde in mehreren Arbeiten am Institut für Hochfrequenztechnik der RWTH Aachen und an der Fachhochschule Aachen entwickelt. Die Entwicklung der \comboard Hardware wurde in \cite{DragsailKaiMA} und \cite{DragsailMattiMA} beschrieben und eine gute Beschreibung der DSP-FPGA Schnittstelle ist in \cite{DragsailAndrejMA} zu finden.
In diesem Abschnitt wird ein Überblick über die für diese Arbeit relevanten Teile der \comboard Hardware gegeben werden. Die Hardware des \comboard Subsystems des \dscubesat ist in \FR{COMTop.png} und \FR{COMBottom.png} zu sehen. 

Die für den GPS Empfänger relevanten Teile des \comboard sind: 
\begin{itemize}
\item Ein leistungsfähiger \gls{DSP} für Signalverarbeitung und Systemmanagement Aufgaben.
\item Ein \gls{FPGA} der zum einen für die Bildverarbeitung der Kameras notwendig ist, aber auch beim GPS beim Tracking zum Einsatz kommt.
\item Ein GPS HF Frontend, was die Digitalisierung der von den GPS Antennen kommenden HF Signale übernimmt.
\end{itemize}

\FGimg[Oberseite der COM Leiterplatte.]{COMTop.png}{Oberseite der COM Leiterplatte.}{9cm}

\FGimg[Unterseite der COM Leiterplatte.]{COMBottom.png}{Unterseite der COM Leiterplatte.}{9cm}

In \FR{SystemBlockdiagram.png} ist ein vereinfachtes Blockdiagramm des \comboard dargestellt. Das GPS Frontend hat eine write-only SPI Schnittstelle, die an den SPI Bus des DSP angeschlossen ist, was aber lediglich der Konfiguration der Frontend Parameter dient. Das digitalisierte \gls{ZF} Signal wird dagegen über eine parallele, synchrone Schnittstelle an den FPGA weitergegeben. Der FPGA übernimmt zum einen Teile der Datenverarbeitung (\emph{Tracking}), zum anderen puffert er die Rohdaten, um sie auf Anfrage an den DSP weiterzugeben. Der Datenaustausch zwischen FPGA und DSP erfolgt über ein asynchrones Speicherinterface. 

\FGimg[Vereinfachtes Blockdiagramm des COM Board]{SystemBlockdiagram.png}{Vereinfachtes Blockdiagram des \comboard. Es sind lediglich die Komponenten dargestellt, die für den GPS Empfänger relevant sind.}{0.7\textwidth}

\subsection{GPS Frontend MAX2769}
\label{max2769frontend}
Das GPS Frontend hat die Aufgabe das L-Band Signal (\SI{1575.42}{\MHz}) auf eine \gls{ZF} herabzusetzen und zu digitalisieren. Dazu beinhaltet das Frontend einen PLL stabilisierten Frequenzsynthesizer, Low-Noise Vorverstärker, Mischer, Filter mit \gls{AGC} und AD Wandler. Die Funktion ist in weiten Bereichen über eine SPI Schnittstelle konfigurierbar: Für aktive Antennen steht eine Phantomspeisung zur Verfügung und es kann aus zwei \gls{LNA} ausgewählt werden die auf passive, bzw. aktive Antennen optimiert sind. Die \gls{LO} Frequenz wird von einer PLL erzeugt, über die die ZF Frequenz ebenfalls wählbar ist. Zur Anpassung an andere ZF Frequenzen sind außerdem die ZF Filter konfigurierbar. Eine Beschreibung aller Funktionen des MAX2769 Frontends ist dem Datenblatt \cite{max2769} zu entnehmen.

Das komplexe (\emph{IQ}) ZF Signal kann mit \SI{1}{\bit}, \SI{1.5}{\bit} oder \SI{2}{\bit}  quantisiert werden. Falls lediglich ein reelles (\emph{I}) ZF Signal gewünscht ist, stehen außerdem  \SI{2.5}{\bit} und \SI{3}{\bit} Quantisierung zur Auswahl.

\FGimg[Blockdiagram MAX2769]{MAX2769.pdf}{Blockdiagramm des MAX2769 GPS Frontend ICs (entnommen aus \cite{max2769})}{0.8\textwidth}

\subsection{Digitaler Signalprozessor}
Auf dem \gls{DSP} des \comboard läuft ein embedded Linux System und der Zugriff auf den FPGA und die SPI Schnittstelle erfolgt über Treiber die als ladbare Kernelmodule ausgeführt sind \FR{LinuxSystem.png}. Anwendungsprogramme (wie der GPS Prozess) können dann über die Linux Devices auf die Hardware zugreifen. Dadurch ist die Low-Level Programmierung klar von der Anwendungsprogrammierung getrennt. Weitere Vorteile des Linux Systems sind das einfache Multitasking und der Möglichkeit der Verwendung von Standardbibliotheken. Einige Nachteile gegenüber einer \emph{Bare Metal} Implementierung sind allerdings die fehlende Echtzeitfähigkeit, weshalb in dieser Arbeit der DSP nur für nicht-zeitkritische Berechnungen, verwendet wird.

\FGimg[Systemarchitektur Linux]{LinuxSystem.png}{Prinzipielle Systemarchitektur eines Linux Systems. Die Hardware wird durch den Kernel und die Kerneltreiber abstrahiert}{0.7\textwidth}

\subsection{FPGA}
Der FPGA hat, wie bereits erwähnt, einerseits die Aufgabe eines Bindeglieds zwischen GPS Frontend und DSP, andererseits bietet die programmierbare Logik hervorragende Voraussetzungen um parallelisierbare Prozesse mit Echtzeitanforderungen zu implementieren. 

Neben reiner programmierbare kombinatorischer und sequentieller Logik, bieten heutige FPGAs außerdem dedizierte Hardware, die sich zwar in Logik realisieren lassen würde, aber unnötige Ressourcen verbrauchen würde. So beinhaltet der verwendete \comfpga mehrere \SI{18}{\bit} Hardware Multiplizierer, insgesamt \SI{576}{\kilo\bit} Block RAM, verschiedene PLL und Digital Clock Management Module und unterstützt mehrere IO Level Standards verschiedenen IO Bänken.