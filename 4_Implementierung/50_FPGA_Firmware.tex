\section{FPGA Firmware}
In diesem Abschnitt wird die im Rahmen dieser Arbeit entwickelte Implementierung auf FPGA Seite besprochen. Begonnen wird mit einem Überblick und einer Beschreibung der Top-Level Entity. Danach beschäftigt sich der größte Teil mit der Implementierung des Tracking Loop. Der MBlite Prozessor selbst wird hier nicht im Detail besprochen\footnote{Der MBlite Softcore ist in \cite{MBliteThesis} beschrieben.}, aber der Interrupt Controller der entwickelt wurde und die Schnittstelle zwischen MBlite und den Tracking Loop Instanzen.

Im Folgenden wird von UML Klassendiagrammen Gebrauch gemacht um Beziehungen zwischen den Komponenten darzustellen. Deshalb sll kurz erklärt wie diese im Zusammenhang mit der Programmiersprache VHDL zu interpretieren sind: Die Hardwarebeschreibung in VHDL gliedert sich in \emph{Components}. Ein \emph{Component} ist die Instanz einer \emph{Entity} und einer \emph{Architecture}. Eine \emph{Entity} beschreibt die Schnittstelle eines \emph{Component}, und die \emph{Architecture} den inneren Aufbau und Funktion des \emph{Component}. Die \emph{Architecture} Aufbau besteht dabei aus kombinatorischer oder sequentieller Logik, kann aber auch wiederum andere \emph{Components} enthalten.

Typdefinitionen und Componentdeklarationen usw. können zur einfacheren Verwendung in \emph{Packages} zusammengefasst werden. Außerdem können \emph{Entities}, \emph{Architectures} und \emph{Packages} in \emph{Libraries} zusammengefasst werden\footnote{Wenn ein Element nicht aktiv einer Bibliothek hinzugefügt wird, so wird es implizit der \lstinline$work$ Bibliothek hinzugefügt.}. So wurden zum Beispiel die Komponenten des Trackingloop in der \lstinline$gps$ Bibliothek zusammengefasst. Die meisten Teile des MBlite Softcores sind Teil der \lstinline$mblite$ Bibliothek.

In den UML Klassendiagrammen sind die \emph{Entities} als  \emph{Interfaces} modelliert, wobei die VHDL Ports als Attribute mit Sichtbarkeit \emph{public} dargestellt sind. Operationen bietet die Schnittstelle selbst keine. Die \emph{Architectures} sind die Klassen, die eine Interface realisieren. Die in den Architectures enhaltenen Signale sind als Attribute mit Sichtbarkeit \emph{private} modelliert. Wenn eine \emph{Architecture} andere \emph{Components} enthält ist das als UML Komposition modelliert.

 
% Synchronität
\subsection{Schnittstellen}

\input{4_Implementierung/55_trackingloop_vhdl}

\subsubsection{FIFOs}

\label{ImplMemoryMapTrackingloop}
\subsubsection{VCO}\label{VCOimplementierung}

\subsection{MBlite Prozessor}
%Instruction und Data Memory. Addressmapping.
\subsection{MBlite Firmware}